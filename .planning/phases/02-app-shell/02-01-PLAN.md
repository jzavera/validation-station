---
phase: 02-app-shell
plan: 01
type: execute
wave: 1
depends_on: ["01-02"]
files_modified:
  - src/context/validationReducer.ts
  - src/components/Header.tsx
  - src/components/StatusBar.tsx
  - src/App.tsx
autonomous: true

must_haves:
  truths:
    - "App renders a full-screen view split into a left panel (55%) and right panel (45%) with no scrollbar on the outer shell"
    - "Header bar displays the app title, zoom control buttons (+/-/reset), and a Confirm All button"
    - "Status bar at the bottom shows the current field position and keyboard shortcut hints"
    - "Zoom controls dispatch ZOOM_IN, ZOOM_OUT, SET_ZOOM actions to the reducer"
    - "Confirm All button dispatches CONFIRM_ALL_FIELDS action marking all unconfirmed fields"
    - "Status bar reads activeFieldId position from validation state"
  artifacts:
    - path: "src/components/Header.tsx"
      provides: "Header bar with app title, zoom controls, and Confirm All button"
      exports: ["Header"]
    - path: "src/components/StatusBar.tsx"
      provides: "Status bar with field position and keyboard hints"
      exports: ["StatusBar"]
    - path: "src/context/validationReducer.ts"
      provides: "Updated reducer with CONFIRM_ALL_FIELDS action"
      exports: ["ValidationAction", "validationReducer"]
    - path: "src/App.tsx"
      provides: "Full-screen two-panel layout with header and status bar"
      exports: ["default"]
  key_links:
    - from: "src/components/Header.tsx"
      to: "src/context/useValidation.ts"
      via: "useValidation hook for dispatch and zoom state"
      pattern: "import.*useValidation.*from.*context/useValidation"
    - from: "src/components/StatusBar.tsx"
      to: "src/context/useValidation.ts"
      via: "useValidation hook for field position state"
      pattern: "import.*useValidation.*from.*context/useValidation"
    - from: "src/App.tsx"
      to: "src/components/Header.tsx"
      via: "component import"
      pattern: "import.*Header.*from.*components/Header"
    - from: "src/App.tsx"
      to: "src/components/StatusBar.tsx"
      via: "component import"
      pattern: "import.*StatusBar.*from.*components/StatusBar"
---

<objective>
Build the full-screen App Shell with a header bar, two-panel split layout, and status bar. Wire header controls to state actions and status bar to state reads.

Purpose: Provide the visual container that all downstream features (field display, document rendering) will plug into. The operator should see the complete app chrome with working zoom controls and field position feedback.
Output: A full-screen layout with Header (title, zoom +/-/reset, Confirm All), left panel placeholder (55%), right panel placeholder (45%), and StatusBar (field X/Y, keyboard hints).
</objective>

<execution_context>
@/Users/bogdanzavera/.claude/get-shit-done/workflows/execute-plan.md
@/Users/bogdanzavera/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/context/validationReducer.ts
@src/context/ValidationProvider.tsx
@src/context/useValidation.ts
@src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CONFIRM_ALL_FIELDS action to the reducer</name>
  <files>
    src/context/validationReducer.ts
  </files>
  <action>
    1. Add a new action type to the ValidationAction discriminated union:
       ```typescript
       | { type: 'CONFIRM_ALL_FIELDS' }
       ```

    2. Add the case to the reducer switch statement. CONFIRM_ALL_FIELDS should:
       - Iterate through ALL field groups and ALL fields
       - Set `operatorConfirmed: true` and `validationSource: 'user'` on every field where `operatorConfirmed` is currently `false`
       - Return updated state immutably (new fieldGroups array with new field objects)

    3. The implementation should look something like:
       ```typescript
       case 'CONFIRM_ALL_FIELDS': {
         return {
           ...state,
           result: {
             ...state.result,
             fieldGroups: state.result.fieldGroups.map((group) => ({
               ...group,
               fields: group.fields.map((field) =>
                 field.operatorConfirmed
                   ? field
                   : { ...field, operatorConfirmed: true, validationSource: 'user' as const }
               ),
             })),
           },
           isEditing: false,
         };
       }
       ```

    IMPORTANT: The exhaustiveness check in the default case will catch any missing action types at compile time. The new action must be handled before the default case.
  </action>
  <verify>
    Run `npx tsc --noEmit` and confirm zero TypeScript errors.
    The exhaustiveness check in the default case must still compile (no missing cases).
  </verify>
  <done>
    CONFIRM_ALL_FIELDS action is added to the ValidationAction union and handled in the reducer. It marks all unconfirmed fields as confirmed with validationSource 'user'. TypeScript compiles cleanly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build the Header component</name>
  <files>
    src/components/Header.tsx
  </files>
  <action>
    1. Create `src/components/Header.tsx` that exports a `Header` component.

    2. The Header should be a horizontal bar with:
       - Fixed height (h-12 or h-14)
       - Background color: dark (bg-gray-900 or similar) for contrast
       - Flex layout with items centered vertically, justify-between for spacing

    3. Left section: App title
       - "Validation Station" in white, bold, text-sm or text-base

    4. Center section: Zoom controls
       - Three buttons in a row: [-] [100%] [+]
       - The minus button dispatches `{ type: 'ZOOM_OUT' }`
       - The plus button dispatches `{ type: 'ZOOM_IN' }`
       - The center button (showing current zoom %) dispatches `{ type: 'SET_ZOOM', zoom: 1.0 }` to reset
       - Display zoom as `Math.round(state.zoom * 100) + '%'`
       - Style buttons with rounded borders, hover states, and muted colors

    5. Right section: "Confirm All" button
       - Green-ish button (bg-emerald-600 hover:bg-emerald-700 or similar)
       - Text: "Confirm All"
       - On click dispatches `{ type: 'CONFIRM_ALL_FIELDS' }`

    6. Use the `useValidation` hook to access state and dispatch.

    IMPORTANT: Use Tailwind CSS utility classes exclusively. No CSS files or inline styles.
  </action>
  <verify>
    Run `npx tsc --noEmit` and confirm zero TypeScript errors.
    Visually inspect: Header has title on left, zoom controls in center, Confirm All on right.
  </verify>
  <done>
    Header component renders a dark bar with: "Validation Station" title (left), zoom controls with -/reset/+ buttons (center), "Confirm All" green button (right). All buttons dispatch correct actions via useValidation.
  </done>
</task>

<task type="auto">
  <name>Task 3: Build the StatusBar component</name>
  <files>
    src/components/StatusBar.tsx
  </files>
  <action>
    1. Create `src/components/StatusBar.tsx` that exports a `StatusBar` component.

    2. The StatusBar should be a horizontal bar at the bottom:
       - Fixed height (h-8 or h-7)
       - Background: slightly dark (bg-gray-100 or bg-gray-800 for dark theme)
       - Flex layout, items centered, text-xs
       - Border-top for visual separation

    3. Left side: Field position indicator
       - Use the `useValidation` hook to access `state.activeFieldId` and `state.fieldOrder`
       - Calculate current position: `fieldOrder.indexOf(activeFieldId) + 1`
       - Display: "Field X / Y" where X is current position and Y is total fields
       - If no active field, display "No field selected"

    4. Right side: Keyboard shortcut hints
       - Show hints like: "Tab: Next | Shift+Tab: Prev | Space: Confirm | Enter: Edit | +/-: Zoom"
       - Style with muted text color (text-gray-400 or text-gray-500)

    5. Use the `useValidation` hook to read state (no dispatching needed).

    IMPORTANT: Use Tailwind CSS utility classes exclusively.
  </action>
  <verify>
    Run `npx tsc --noEmit` and confirm zero TypeScript errors.
    StatusBar shows field position derived from state and keyboard hints.
  </verify>
  <done>
    StatusBar component renders a bottom bar with: field position "Field X / Y" (left) and keyboard shortcut hints (right). Position is computed from activeFieldId and fieldOrder in validation state.
  </done>
</task>

<task type="auto">
  <name>Task 4: Wire the full-screen two-panel layout in App.tsx</name>
  <files>
    src/App.tsx
  </files>
  <action>
    1. Replace the current AppContent component with the full app shell layout.

    2. The layout structure should be:
       ```
       <div className="h-screen flex flex-col overflow-hidden">
         <Header />
         <main className="flex-1 flex min-h-0">
           <div className="w-[55%] ...">  <!-- Document panel -->
             <!-- Placeholder content -->
           </div>
           <div className="w-[45%] ...">  <!-- Field panel -->
             <!-- Placeholder content -->
           </div>
         </main>
         <StatusBar />
       </div>
       ```

    3. Key layout requirements:
       - `h-screen` on the outer div to fill the viewport
       - `overflow-hidden` on the outer div to prevent outer scrollbar
       - `flex flex-col` for vertical stacking (header / main / status)
       - `flex-1 min-h-0` on main so it takes remaining space and allows children to scroll
       - Left panel: `w-[55%]` with a background (bg-gray-200 or similar) and centered placeholder text "Document Viewer"
       - Right panel: `w-[45%]` with white background and centered placeholder text "Field Panel"
       - A vertical divider between panels (border-l or a thin border)

    4. Keep the window globals for console testing (useEffect with __dispatch/__state).

    5. Import Header and StatusBar from the new component files.

    6. Keep the ValidationProvider wrapper in the outer App component.

    IMPORTANT: The panels should have `overflow-auto` or `overflow-y-auto` so their content can scroll independently when content is added in later phases.
  </action>
  <verify>
    Run `npx tsc --noEmit` and confirm zero TypeScript errors.
    Run `npm run build` and confirm production build succeeds.
    Visually verify: Full-screen layout with no outer scrollbar, header on top, two panels side by side (55/45 split), status bar at bottom.
  </verify>
  <done>
    App.tsx renders a full-screen flex-column layout: Header (top), two-panel split main (55% left / 45% right with placeholder text), StatusBar (bottom). No outer scrollbar. Console testing globals preserved. Production build passes.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npm run build` completes successfully
3. App renders full-screen with no outer scrollbar
4. Header shows title (left), zoom controls (center), Confirm All (right)
5. Left panel is 55% width with "Document Viewer" placeholder
6. Right panel is 45% width with "Field Panel" placeholder
7. Status bar shows "Field 1 / 13" and keyboard hints
8. Clicking zoom +/- updates the zoom display in the header
9. Clicking zoom percentage resets to 100%
10. Clicking "Confirm All" marks all fields as confirmed in state
</verification>

<success_criteria>
- Full-screen two-panel layout with no outer scrollbar
- Header with working zoom controls and Confirm All button
- Status bar showing correct field position from state
- All controls properly wired to validation state via dispatch
- TypeScript compiles cleanly, production build passes
</success_criteria>

<output>
After completion, create `.planning/phases/02-app-shell/02-01-SUMMARY.md`
</output>
